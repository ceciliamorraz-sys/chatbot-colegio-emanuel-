<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>EmaBot - Colegio Integral Emanuel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial, sans-serif; }

#chat-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #1f6feb;
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  font-size: 26px;
  cursor: pointer;
}

#chat-box {
  display: none;
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 340px;
  height: 500px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  overflow: hidden;
}

#chat-header {
  background: #1f6feb;
  color: #fff;
  padding: 12px;
  font-weight: bold;
  display: flex;
  justify-content: space-between;
}

#chat-messages {
  padding: 10px;
  height: 300px;
  overflow-y: auto;
  background: #f4f6f8;
  white-space: pre-line;
}

.msg {
  background: #fff;
  padding: 8px;
  margin-bottom: 8px;
  border-radius: 8px;
}

.user {
  background: #dff3ff;
  text-align: right;
}

#chat-options {
  padding: 10px;
  display: grid;
  gap: 8px;
}

.option-btn {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  cursor: pointer;
  background: #fff;
}
</style>
</head>

<body>

<button id="chat-btn">ğŸ’¬</button>

<div id="chat-box">
  <div id="chat-header">
    ğŸ¤– EmaBot â€“ Colegio Integral Emanuel
    <span onclick="toggleChat()" style="cursor:pointer;">âœ–</span>
  </div>

  <div id="chat-messages"></div>

  <div id="chat-options">
    <button class="option-btn" onclick="sendAnswer('contacto')">ğŸ“ Contacto</button>
    <button class="option-btn" onclick="sendAnswer('preescolar')">ğŸ‘¶ Preescolar</button>
    <button class="option-btn" onclick="sendAnswer('primaria')">ğŸ“˜ Primaria</button>
    <button class="option-btn" onclick="sendAnswer('secundaria')">ğŸ“ Secundaria</button>
    <button class="option-btn" onclick="sendAnswer('direccion')">ğŸ“ DirecciÃ³n</button>
    <button class="option-btn" onclick="sendAnswer('whatsapp')">ğŸ“² WhatsApp</button>
  </div>
</div>

<script>
const chatBtn = document.getElementById("chat-btn");
const chatBox = document.getElementById("chat-box");
const messages = document.getElementById("chat-messages");

chatBtn.onclick = toggleChat;

// â° HORARIO
const horaInicio = 7;
const horaFin = 15;

// ğŸ“– TEXTO BÃBLICO DEL DÃA (UNA SOLA VEZ)
const textosBiblicos = [
  "ğŸ“– El texto bÃ­blico de hoy es:\n\"Instruye al niÃ±o en su camino, y aun cuando fuere viejo no se apartarÃ¡ de Ã©l.\" (Proverbios 22:6)",
  "ğŸ“– El texto bÃ­blico de hoy es:\n\"Todo lo puedo en Cristo que me fortalece.\" (Filipenses 4:13)",
  "ğŸ“– El texto bÃ­blico de hoy es:\n\"La sabidurÃ­a viene del SeÃ±or.\" (Proverbios 2:6)",
  "ğŸ“– El texto bÃ­blico de hoy es:\n\"El SeÃ±or te bendiga y te guarde.\" (NÃºmeros 6:24)"
];

const textoDelDia = textosBiblicos[Math.floor(Math.random() * textosBiblicos.length)];
let textoBiblicoMostrado = false;

function dentroDeHorario() {
  const h = new Date().getHours();
  return h >= horaInicio && h < horaFin;
}

function addBotMessage(text) {
  const div = document.createElement("div");
  div.className = "msg";
  div.innerText = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

function toggleChat() {
  chatBox.style.display = chatBox.style.display === "block" ? "none" : "block";

  if (messages.innerHTML === "") {
    addBotMessage(
      "ğŸ‘‹ Bienvenido al Colegio Integral Emanuel.\n\n" +
      "Soy EmaBot, el asistente virtual institucional.\n\n" +
      "â° Horario de atenciÃ³n:\nLunes a Viernes, 7:00 a.m. a 3:00 p.m."
    );

    if (!textoBiblicoMostrado) {
      addBotMessage(textoDelDia);
      textoBiblicoMostrado = true;
    }
  }
}

function redirigirWhatsApp() {
  window.open("https://wa.me/50588543012", "_blank");
}

function sendAnswer(type) {
  if (!dentroDeHorario()) {
    addBotMessage(
      "â° En este momento estamos fuera del horario de atenciÃ³n.\n" +
      "ğŸ“² Puede escribirnos por WhatsApp y con gusto le atenderemos.\n\n" +
      "Bendiciones, quedamos a su disposiciÃ³n."
    );
    redirigirWhatsApp();
    return;
  }

  let response = "";

  if (type === "contacto") {
    response =
      "ğŸ“ DirecciÃ³n:\nCostado Este del MaxiPalÃ­, 25 varas al norte.\n\n" +
      "ğŸ“² WhatsApp: 505 8854 3012\n\n" +
      "â° Horario:\nLunes a Viernes, 7:00 a.m. a 3:00 p.m.";
  }
  else if (type === "preescolar")
    response = "ğŸ‘¶ Nivel Preescolar:\nFormaciÃ³n integral, valores cristianos y aprendizaje lÃºdico.";
  else if (type === "primaria")
    response = "ğŸ“˜ Nivel Primaria:\nEducaciÃ³n acadÃ©mica sÃ³lida, valores y acompaÃ±amiento docente.";
  else if (type === "secundaria")
    response = "ğŸ“ Nivel Secundaria:\nPreparaciÃ³n acadÃ©mica, orientaciÃ³n vocacional y formaciÃ³n integral.";
  else if (type === "direccion")
    response = "ğŸ“ Costado Este del MaxiPalÃ­, 25 varas al norte.";
  else if (type === "whatsapp") {
    addBotMessage("ğŸ“² Le estamos redirigiendo a WhatsApp para atenciÃ³n personalizada.\n\nBendiciones, quedamos a su disposiciÃ³n.");
    redirigirWhatsApp();
    return;
  }
  else {
    // â— NO SABE â†’ WHATSAPP DIRECTO
    addBotMessage(
      "ğŸ“² No contamos con esa informaciÃ³n en este momento.\n" +
      "Le estamos redirigiendo a WhatsApp para atenciÃ³n personalizada.\n\n" +
      "Bendiciones, quedamos a su disposiciÃ³n."
    );
    redirigirWhatsApp();
    return;
  }

  addBotMessage(response + "\n\nBendiciones, quedamos a su disposiciÃ³n.");
}
</script>

</body>
</html>
