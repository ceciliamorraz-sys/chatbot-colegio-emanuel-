<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EmaBot ‚Äì Asistente Virtual</title>

  <style>
    :root{
      --primary:#1e5bd8;
      --primary-2:#0f3aa6;
      --bg:#f4f7ff;
      --card:#ffffff;
      --text:#1b1f2a;
      --muted:#5d6b86;
      --line:#e6eaf3;
      --radius:16px;
      --shadow:0 12px 30px rgba(16,40,120,.14);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:transparent;
      color:var(--text);
    }

    /* Bot√≥n flotante */
    .fab{
      position:fixed;
      right:18px;
      bottom:18px;
      width:56px;height:56px;
      border-radius:999px;
      border:none;
      background:var(--primary);
      color:#fff;
      cursor:pointer;
      box-shadow:var(--shadow);
      display:flex;align-items:center;justify-content:center;
      font-size:22px;
      z-index:9999;
    }

    /* Ventana */
    .chat{
      position:fixed;
      right:18px;
      bottom:86px;
      width:min(380px,calc(100vw - 36px));
      height:72vh;max-height:640px;
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:1px solid var(--line);
      display:none;
      overflow:hidden;
      z-index:9999;
    }
    .chat.open{display:block}

    .chat__header{
      background:linear-gradient(135deg,var(--primary),var(--primary-2));
      color:#fff;
      padding:12px 14px;
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .brand{display:flex;align-items:center;gap:10px}
    .boticon{
      width:34px;height:34px;border-radius:10px;
      background:rgba(255,255,255,.16);
      display:flex;align-items:center;justify-content:center;
    }
    .brand__title{font-weight:700;font-size:14px}
    .brand__sub{font-size:12px;opacity:.9}

    .iconbtn{
      border:none;background:rgba(255,255,255,.18);color:#fff;
      width:34px;height:34px;border-radius:10px;
      cursor:pointer;
    }

    .chat__body{
      background:var(--bg);
      padding:14px;
      height:calc(100% - 56px - 64px);
      overflow:auto;
    }

    .bubble{
      max-width:92%;
      padding:10px 12px;
      border-radius:14px;
      margin:8px 0;
      border:1px solid var(--line);
      background:#fff;
      box-shadow:0 6px 14px rgba(0,0,0,.06);
      font-size:14px;line-height:1.35;
    }
    .bubble.user{
      margin-left:auto;
      background:#eaf1ff;
      border-color:#d5e2ff;
    }

    .panel{
      background:#fff;border:1px solid var(--line);
      border-radius:14px;padding:12px;margin:12px 0;
    }
    .panel__title{font-weight:700;font-size:13px;margin-bottom:8px}

    .btns{
      display:grid;grid-template-columns:1fr 1fr;gap:10px;
    }
    .btn{
      border:1px solid #d6def1;background:#fff;border-radius:12px;
      padding:10px;cursor:pointer;font-weight:600;font-size:13px;
      display:flex;align-items:center;gap:8px;
    }
    .btn.full{grid-column:1 / -1}

    .chat__footer{
      border-top:1px solid var(--line);
      background:#fff;
      padding:10px;display:flex;gap:10px;align-items:center;height:64px;
    }
    .input{
      flex:1;border:1px solid #d6def1;border-radius:12px;
      padding:11px 12px;font-size:14px;
    }
    .send{
      border:none;background:var(--primary);color:#fff;
      border-radius:12px;padding:11px 14px;font-weight:700;cursor:pointer;
    }
  </style>
</head>

<body>

<button class="fab" id="fab">üí¨</button>

<section class="chat" id="chat">
  <header class="chat__header">
    <div class="brand">
      <div class="boticon">ü§ñ</div>
      <div>
        <div class="brand__title">EmaBot ‚Äì Asistente Virtual</div>
        <div class="brand__sub">Colegio Integral Emanuel</div>
      </div>
    </div>
    <button class="iconbtn" id="close">‚úï</button>
  </header>

  <main class="chat__body" id="body"></main>

  <footer class="chat__footer">
    <input class="input" id="input" placeholder="Escriba su consulta aqu√≠..." />
    <button class="send" id="send">Enviar</button>
  </footer>
</section>

<script>
  const SCHOOL = {
    name:"Colegio Integral Emanuel",
    city:"Matagalpa, Nicaragua",
    phone:"8853-3012",
    email:"colegiointegralemanuel@gmail.com",
    hours:"Lunes a Viernes | 7:00 a.m. ‚Äì 3:00 p.m.",
    maps:"https://www.google.com/maps/search/?api=1&query=Colegio+Integral+Emanuel+Matagalpa"
  };

  const chat = document.getElementById("chat");
  const body = document.getElementById("body");
  const input = document.getElementById("input");
  const fab = document.getElementById("fab");

  function addBubble(text, user=false){
    const b=document.createElement("div");
    b.className="bubble"+(user?" user":"");
    b.innerHTML=text;
    body.appendChild(b);
    body.scrollTop=body.scrollHeight;
  }

  function openChat(){
    chat.classList.add("open");
    fab.style.display="none";
    if(body.childElementCount===0){
      addBubble(
        `<b>üëã Bienvenido(a) al asistente virtual del ${SCHOOL.name}.</b><br><br>
         Estoy aqu√≠ para brindarle informaci√≥n clara y oportuna.<br><br>
         <b>‚è∞ Horario:</b> ${SCHOOL.hours}`
      );
      addPanel();
    }
  }

  function closeChat(){
    chat.classList.remove("open");
    fab.style.display="flex";
  }

  function addPanel(){
    const p=document.createElement("div");
    p.className="panel";
    p.innerHTML=`
      <div class="panel__title">Seleccione una opci√≥n</div>
      <div class="btns">
        <button class="btn" onclick="reply('matricula')">üìù Matr√≠cula</button>
        <button class="btn" onclick="reply('horarios')">‚è∞ Horarios</button>
        <button class="btn" onclick="reply('ubicacion')">üìç Ubicaci√≥n</button>
        <button class="btn" onclick="reply('ofertas')">üìö Ofertas</button>
        <button class="btn full" onclick="reply('contacto')">üìû Contacto</button>
      </div>`;
    body.appendChild(p);
  }

  function reply(type){
    if(type==="matricula"){
      addBubble("üìù Para matr√≠cula comun√≠quese al <b>"+SCHOOL.phone+"</b>.");
    }
    if(type==="horarios"){
      addBubble("‚è∞ Horario de atenci√≥n:<br>"+SCHOOL.hours);
    }
    if(type==="ubicacion"){
      addBubble("üìç Nos ubicamos en "+SCHOOL.city+
        `<br><a href="${SCHOOL.maps}" target="_blank">Ver en Google Maps</a>`);
    }
    if(type==="ofertas"){
      addBubble("üìö Ofrecemos Preescolar, Primaria, Ingl√©s y Tecnolog√≠a Educativa.");
    }
    if(type==="contacto"){
      addBubble("üìû Tel: "+SCHOOL.phone+"<br>üìß "+SCHOOL.email);
    }
  }

  document.getElementById("send").onclick=()=>{
    if(input.value.trim()){
      addBubble(input.value,true);
      input.value="";
      addBubble("Gracias por su mensaje. Un momento por favor.");
    }
  };

  document.getElementById("close").onclick=closeChat;
  fab.onclick=openChat;

  /* ‚úÖ APERTURA AUTOM√ÅTICA AL ENTRAR */
  window.addEventListener("load",()=>{
    setTimeout(openChat,600);
  });
</script>

</body>
</html>
