<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>EmaBot - Colegio Integral Emanuel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial, sans-serif; }

#chat-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #1f6feb;
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  font-size: 26px;
  cursor: pointer;
}

#chat-box {
  display: none;
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 330px;
  height: 470px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  overflow: hidden;
}

#chat-header {
  background: #1f6feb;
  color: #fff;
  padding: 12px;
  font-weight: bold;
  display: flex;
  justify-content: space-between;
}

#chat-messages {
  padding: 10px;
  height: 280px;
  overflow-y: auto;
  background: #f4f6f8;
  white-space: pre-line;
}

.msg {
  background: #fff;
  padding: 8px;
  margin-bottom: 8px;
  border-radius: 8px;
}

.user {
  background: #dff3ff;
  text-align: right;
}

#chat-options {
  padding: 10px;
  display: grid;
  gap: 8px;
}

.option-btn {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  cursor: pointer;
  background: #fff;
}
</style>
</head>

<body>

<button id="chat-btn">ğŸ’¬</button>

<div id="chat-box">
  <div id="chat-header">
    ğŸ¤– EmaBot â€“ Colegio Integral Emanuel
    <span onclick="toggleChat()" style="cursor:pointer;">âœ–</span>
  </div>

  <div id="chat-messages"></div>

  <div id="chat-options">
    <button class="option-btn" onclick="sendAnswer('direccion')">ğŸ“ DirecciÃ³n</button>
    <button class="option-btn" onclick="sendAnswer('matricula')">ğŸ’µ MatrÃ­cula</button>
    <button class="option-btn" onclick="sendAnswer('mensualidad')">ğŸ“… Mensualidad</button>
    <button class="option-btn" onclick="sendAnswer('ofrece')">ğŸ“ Â¿QuÃ© ofrece?</button>
    <button class="option-btn" onclick="sendAnswer('whatsapp')">ğŸ“² WhatsApp</button>
  </div>
</div>

<script>
const chatBtn = document.getElementById("chat-btn");
const chatBox = document.getElementById("chat-box");
const messages = document.getElementById("chat-messages");

chatBtn.onclick = toggleChat;

// ğŸ“– FRASES CRISTIANAS
const frasesCristianas = [
  "ğŸ“– \"Todo lo puedo en Cristo que me fortalece.\" (Filipenses 4:13)",
  "ğŸ“– \"El SeÃ±or te bendiga y te guarde.\" (NÃºmeros 6:24)",
  "ğŸ“– \"Instruye al niÃ±o en su camino.\" (Proverbios 22:6)",
  "ğŸ“– \"La sabidurÃ­a viene del SeÃ±or.\" (Proverbios 2:6)",
  "ğŸ“– \"Dios es amor.\" (1 Juan 4:8)"
];

function fraseAleatoria() {
  return frasesCristianas[Math.floor(Math.random() * frasesCristianas.length)];
}

function speak(text) {
  if (!("speechSynthesis" in window)) return;
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "es-ES";
  window.speechSynthesis.speak(u);
}

function addBotMessage(text) {
  const div = document.createElement("div");
  div.className = "msg";
  div.innerText = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
  speak(text);
}

function cierreCristiano() {
  setTimeout(() => {
    addBotMessage(fraseAleatoria());
    setTimeout(() => {
      addBotMessage("ğŸ™ Bendiciones, quedamos a su disposiciÃ³n.");
    }, 900);
  }, 700);
}

function toggleChat() {
  chatBox.style.display = chatBox.style.display === "block" ? "none" : "block";
  if (messages.innerHTML === "") {
    addBotMessage("ğŸ‘‹ Â¡Hola! Soy EmaBot, el asistente virtual del Colegio Integral Emanuel.");
    addBotMessage("ğŸ˜Š Â¿En quÃ© podemos ayudarte hoy?");
  }
}

function sendAnswer(type) {
  let response = "";

  if (type === "direccion")
    response = "ğŸ“ Costado Este del Maxipali, 25 varas al norte.";

  if (type === "mensualidad")
    response = "ğŸ“… La mensualidad es de C$ 1,450.";

  if (type === "matricula")
    response = "ğŸ’µ La informaciÃ³n de matrÃ­cula se brinda por WhatsApp.";

  if (type === "ofrece")
    response = "ğŸ“ Ofrecemos educaciÃ³n integral, formaciÃ³n en valores y un ambiente seguro.";

  if (type === "whatsapp") {
    window.open("https://wa.me/50588543012", "_blank");
    response = "ğŸ“² Te estamos redirigiendo a WhatsApp.";
  }

  addBotMessage(response);
  cierreCristiano();
}
</script>

</body>
</html>
